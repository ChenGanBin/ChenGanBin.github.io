---
title: 中断
date: 2018-02-18 22:21:41
tags:
---

### 中断

  整个中断过程由如下三部分组成:

- 中断发生  
CPU在处理某一事件A时，发生了另一事件B请求CPU迅速去处理（中断
  发生

- 中断响应和中断服务  
CPU暂时中断当前的工作，转去处理事件B（中断响应和中断服务）

- 中断返回  
待CPU将事件B处理完毕后，再回到原来事件A被中断的地方继续处理事件A（中断返回）

示意图：中断系统.png

其它概念
中断源：引起CPU中断的根源
中断源向CPU提出的中断请求。CPU暂时中断原来的事务A，转去处理事件B，对事件B处理完毕后，再回到原来被中断的地方（即**断点**），称为中断返回，实现上述中断功能的部件称为 **中断系统**
示意图：中断系统02.png

作用：解决了快速主机与慢速I/O设备的数据传送问题
特点：
分时操作：CPU可以分时为多个I/O设备服务，提高了计算机的利用率
实时响应：CPU能够及时处理应用系统的随机事件，系统的实时性大大增强
可靠性高：CPU具有处理设备故障及掉电等突发性事件能力，从而使系统可靠性提高

中断允许控制
CPU对中断系统所有中断以及某个中断源的开放和屏蔽是由中断允许寄存器IE控制的
中断请求标志

中断优先级
同一优先级中的中断请求不止一个时，则有中断优先权排队问题。同一优先级的中断优先权排队，由中断系统硬件确定的自然优先级形成

51单片机的中断优先级三原则：
1. CPU同时接收到几个中断时，首先响应优先级别最高的中断请求
2. 正在进行的中断过程不能被新的同级或低优先级的中断请求所中断
3. 正在进行的低优先级中断服务，能被高优先级中断请求所中断

为了实现上述后两条原则，中断系统内部设有两个用户不能寻址的优先级状态触发器，其中一个置1，表示正在响应高优先级的中断，它将阻断后来所有的中断请求，另一个置1，表示正在响应低优先级中断，它将阻断后来所有的低优先级中断请求。

中断响应条件
1. 中断源有中断请求
2. 此中断源的中断允许位为1
3. CPU开中断
以上三条同时满足市，CPU才有可能响应中断

使用中断，程序员需要做什么？
1. 你想使用的中断是那个？选择相应的中断号
2. 你所希望的触发条件是什么？
3. 你希望在中断之后干什么？
